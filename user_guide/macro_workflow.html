

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Macro development &mdash; KQCircuits  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/logo.svg"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Mask export" href="mask_export.html" />
    <link rel="prev" title="Python workflow tutorial" href="python_workflow.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo-small.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#klayout">KLayout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#known-installation-issues">Known installation issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation.html#installing-different-python-package-versions-to-klayout-manually">Installing different Python package versions to KLayout manually</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_features.html">GUI Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="gui_features.html#useful-hotkeys">Useful hotkeys</a></li>
<li class="toctree-l3"><a class="reference internal" href="gui_features.html#introduction-to-elements">Introduction to Elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="gui_features.html#placing-elements">Placing Elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="gui_features.html#modifying-element-parameters">Modifying Element parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="gui_features.html#modifying-waveguides">Modifying waveguides</a></li>
<li class="toctree-l3"><a class="reference internal" href="gui_features.html#editing-waveguidecomposite-nodes">Editing WaveguideComposite Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="gui_features.html#converting-elements-placed-in-gui-into-code">Converting elements placed in GUI into code</a></li>
<li class="toctree-l3"><a class="reference internal" href="gui_features.html#useful-menu-commands">Useful Menu Commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="gui_workflow.html">Point-and-click workflow tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_workflow.html">Python workflow tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="python_workflow.html#file-system-hierarchy">File system hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="python_workflow.html#structure-of-pcell-code">Structure of  PCell code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="python_workflow.html#element-class"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code> class</a></li>
<li class="toctree-l4"><a class="reference internal" href="python_workflow.html#pcell-libraries">PCell Libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="python_workflow.html#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="python_workflow.html#build">Build</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="python_workflow.html#example-of-defining-an-element-class">Example of defining an <code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code> class</a></li>
<li class="toctree-l3"><a class="reference internal" href="python_workflow.html#example-of-defining-a-chip-and-inserting-elements-into-it">Example of defining a Chip and inserting elements into it</a><ul>
<li class="toctree-l4"><a class="reference internal" href="python_workflow.html#defining-sampleholder-types">Defining sampleholder types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="python_workflow.html#refpoints">Refpoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="python_workflow.html#faces">Faces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="python_workflow.html#layer-configuration-files">Layer configuration files</a></li>
<li class="toctree-l4"><a class="reference internal" href="python_workflow.html#adding-a-new-face">Adding a new face</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="python_workflow.html#kqcircuit-s-layers">KQCircuit’s Layers</a></li>
<li class="toctree-l3"><a class="reference internal" href="python_workflow.html#opening-element-or-chip-from-an-ide">Opening <code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">Chip</span></code> from an IDE</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Macro development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-the-first-example">Running the first example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interacting-with-the-klayout-application">Interacting with the KLayout application</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-a-new-panel">Creating a new panel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#accessing-the-currently-active-panel">Accessing the currently active panel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-klayoutview">Using <code class="docutils literal notranslate"><span class="pre">KLayoutView</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#debugger">Debugger</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reloading-libraries">Reloading libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mask_export.html">Mask export</a><ul>
<li class="toctree-l3"><a class="reference internal" href="mask_export.html#tutorial">Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="mask_export.html#basic-mask-script-and-export">Basic mask script and export</a></li>
<li class="toctree-l4"><a class="reference internal" href="mask_export.html#ground-grid">Ground grid</a></li>
<li class="toctree-l4"><a class="reference internal" href="mask_export.html#adding-and-modifying-chips">Adding and modifying chips</a></li>
<li class="toctree-l4"><a class="reference internal" href="mask_export.html#multi-face-masks">Multi-face masks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="simulations.html">External simulation tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="simulation/simulation_object.html">Creating simulation object</a><ul>
<li class="toctree-l4"><a class="reference internal" href="simulation/simulation_object.html#geometry-from-klayout-gui">Geometry from Klayout GUI</a></li>
<li class="toctree-l4"><a class="reference internal" href="simulation/simulation_object.html#geometry-from-kqcircuits-library">Geometry from KQCircuits library</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="simulation/ansys_export.html">Ansys export</a><ul>
<li class="toctree-l4"><a class="reference internal" href="simulation/ansys_export.html#ansys-scripts">Ansys scripts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="simulation/sonnet_export.html">Sonnet export</a></li>
<li class="toctree-l3"><a class="reference internal" href="simulation/gmsh_elmer_export.html">Gmsh/Elmer export</a></li>
<li class="toctree-l3"><a class="reference internal" href="simulation/export_and_run.html">Run and export in one line</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="xsection.html">Creating cross section images</a><ul>
<li class="toctree-l3"><a class="reference internal" href="xsection.html#klayout-gui-xsection-tool">KLayout GUI XSection tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="xsection.html#xsection-call-in-kqc-code">XSection call in KQC code</a></li>
<li class="toctree-l3"><a class="reference internal" href="xsection.html#process-files-xs">Process files (.xs)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="terminology.html">Terminology</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../salt.html">Salt Package Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../salt.html#installing-kqcircuits-salt-package">Installing KQCircuits Salt Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../salt.html#user-specific-content">User Specific Content</a></li>
<li class="toctree-l2"><a class="reference internal" href="../salt.html#upgrading-or-removing-salt-package">Upgrading or Removing Salt Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../salt.html#release-notes">Release Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer/setup.html">Developer Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/setup.html#prerequisites">Prerequisites</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/setup.html#python">Python</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/setup.html#sources">Sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/setup.html#install">Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/setup.html#update">Update</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/setup.html#secondary-install">Secondary install</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/setup.html#manual-installation">Manual installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/setup.html#linux-or-macos">Linux or MacOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/setup.html#windows">Windows</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/standalone.html">KLayout Standalone Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/standalone.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/standalone.html#installation">Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/standalone.html#pypi-installation">PyPI Installation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/standalone.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/standalone.html#jupyter-notebook-usage">Jupyter notebook usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/containers.html">Containers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/containers.html#cli-usage">CLI usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/containers.html#docker-ci-usage">Docker CI usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/containers.html#singularity-usage">Singularity usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/architecture.html">Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/architecture.html#elements">Elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/architecture.html#pcell-parameters">PCell parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/architecture.html#libraries">Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/architecture.html#pya-resolver">pya resolver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/testing.html">Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/testing.html#unit-tests">Unit tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/coding_style.html">Coding Style</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/documentation.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html">Contributing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../contributing.html#versioning">Versioning</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/kqcircuits.html">API documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/kqcircuits.chips.html">kqcircuits.chips</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.airbridge_crossings.html">kqcircuits.chips.airbridge_crossings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.airbridge_dc_test.html">kqcircuits.chips.airbridge_dc_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.chip.html">kqcircuits.chips.chip</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.crossing_twoface.html">kqcircuits.chips.crossing_twoface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.daisy_woven.html">kqcircuits.chips.daisy_woven</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.dc_test.html">kqcircuits.chips.dc_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.demo.html">kqcircuits.chips.demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.demo_twoface.html">kqcircuits.chips.demo_twoface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.empty.html">kqcircuits.chips.empty</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.junction_test.html">kqcircuits.chips.junction_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.junction_test2.html">kqcircuits.chips.junction_test2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.launchers.html">kqcircuits.chips.launchers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.lithography_test.html">kqcircuits.chips.lithography_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.lithography_test_twoface.html">kqcircuits.chips.lithography_test_twoface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.quality_factor.html">kqcircuits.chips.quality_factor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.quality_factor_twoface.html">kqcircuits.chips.quality_factor_twoface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.sample_holder_test.html">kqcircuits.chips.sample_holder_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.shaping.html">kqcircuits.chips.shaping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.simple.html">kqcircuits.chips.simple</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.single_xmons.html">kqcircuits.chips.single_xmons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.stripes.html">kqcircuits.chips.stripes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.tsv_test.html">kqcircuits.chips.tsv_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.xmons_direct_coupling.html">kqcircuits.chips.xmons_direct_coupling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.chips.html#module-kqcircuits.chips">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/kqcircuits.elements.html">kqcircuits.elements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.airbridges.html">kqcircuits.elements.airbridges</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.airbridges.airbridge.html">kqcircuits.elements.airbridges.airbridge</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.airbridges.airbridge_multi_face.html">kqcircuits.elements.airbridges.airbridge_multi_face</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.airbridges.airbridge_rectangular.html">kqcircuits.elements.airbridges.airbridge_rectangular</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.airbridges.html#module-kqcircuits.elements.airbridges">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.flip_chip_connectors.html">kqcircuits.elements.flip_chip_connectors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.flip_chip_connectors.flip_chip_connector.html">kqcircuits.elements.flip_chip_connectors.flip_chip_connector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.flip_chip_connectors.flip_chip_connector_dc.html">kqcircuits.elements.flip_chip_connectors.flip_chip_connector_dc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.flip_chip_connectors.flip_chip_connector_rf.html">kqcircuits.elements.flip_chip_connectors.flip_chip_connector_rf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.flip_chip_connectors.html#module-kqcircuits.elements.flip_chip_connectors">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.fluxlines.html">kqcircuits.elements.fluxlines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.fluxlines.fluxline.html">kqcircuits.elements.fluxlines.fluxline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.fluxlines.fluxline_standard.html">kqcircuits.elements.fluxlines.fluxline_standard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.fluxlines.fluxline_straight.html">kqcircuits.elements.fluxlines.fluxline_straight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.fluxlines.html#module-kqcircuits.elements.fluxlines">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.markers.html">kqcircuits.elements.markers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.markers.marker.html">kqcircuits.elements.markers.marker</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.markers.marker_standard.html">kqcircuits.elements.markers.marker_standard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.markers.html#module-kqcircuits.elements.markers">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.tsvs.html">kqcircuits.elements.tsvs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.tsvs.tsv.html">kqcircuits.elements.tsvs.tsv</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.tsvs.tsv_ellipse.html">kqcircuits.elements.tsvs.tsv_ellipse</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.tsvs.tsv_standard.html">kqcircuits.elements.tsvs.tsv_standard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.elements.tsvs.html#module-kqcircuits.elements.tsvs">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.airbridge_connection.html">kqcircuits.elements.airbridge_connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.chip_frame.html">kqcircuits.elements.chip_frame</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.circular_capacitor.html">kqcircuits.elements.circular_capacitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.element.html">kqcircuits.elements.element</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.finger_capacitor_square.html">kqcircuits.elements.finger_capacitor_square</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.finger_capacitor_taper.html">kqcircuits.elements.finger_capacitor_taper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.launcher.html">kqcircuits.elements.launcher</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.launcher_dc.html">kqcircuits.elements.launcher_dc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.mask_marker_fc.html">kqcircuits.elements.mask_marker_fc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.meander.html">kqcircuits.elements.meander</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.smooth_capacitor.html">kqcircuits.elements.smooth_capacitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.spiral_resonator_polygon.html">kqcircuits.elements.spiral_resonator_polygon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.waveguide_composite.html">kqcircuits.elements.waveguide_composite</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.waveguide_coplanar.html">kqcircuits.elements.waveguide_coplanar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.waveguide_coplanar_curved.html">kqcircuits.elements.waveguide_coplanar_curved</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.waveguide_coplanar_splitter.html">kqcircuits.elements.waveguide_coplanar_splitter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.waveguide_coplanar_straight.html">kqcircuits.elements.waveguide_coplanar_straight</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.waveguide_coplanar_taper.html">kqcircuits.elements.waveguide_coplanar_taper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.elements.html#module-kqcircuits.elements">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/kqcircuits.junctions.html">kqcircuits.junctions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.junctions.junction.html">kqcircuits.junctions.junction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.junctions.manhattan.html">kqcircuits.junctions.manhattan</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.junctions.manhattan_single_junction.html">kqcircuits.junctions.manhattan_single_junction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.junctions.no_squid.html">kqcircuits.junctions.no_squid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.junctions.sim.html">kqcircuits.junctions.sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.junctions.squid.html">kqcircuits.junctions.squid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.junctions.html#module-kqcircuits.junctions">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/kqcircuits.layer_config.html">kqcircuits.layer_config</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.layer_config.default_layer_config.html">kqcircuits.layer_config.default_layer_config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.layer_config.example_layer_config.html">kqcircuits.layer_config.example_layer_config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.layer_config.html#module-kqcircuits.layer_config">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/kqcircuits.masks.html">kqcircuits.masks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.masks.mask_export.html">kqcircuits.masks.mask_export</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.masks.mask_layout.html">kqcircuits.masks.mask_layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.masks.mask_set.html">kqcircuits.masks.mask_set</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.masks.html#module-kqcircuits.masks">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/kqcircuits.qubits.html">kqcircuits.qubits</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.qubits.double_pads.html">kqcircuits.qubits.double_pads</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.qubits.double_pads_splines.html">kqcircuits.qubits.double_pads_splines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.qubits.qubit.html">kqcircuits.qubits.qubit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.qubits.swissmon.html">kqcircuits.qubits.swissmon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.qubits.html#module-kqcircuits.qubits">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/kqcircuits.simulations.html">kqcircuits.simulations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.simulations.export.html">kqcircuits.simulations.export</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.simulations.export.ansys.html">kqcircuits.simulations.export.ansys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.simulations.export.elmer.html">kqcircuits.simulations.export.elmer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.simulations.export.sonnet.html">kqcircuits.simulations.export.sonnet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.simulations.export.xsection.html">kqcircuits.simulations.export.xsection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.simulations.export.export_and_run.html">kqcircuits.simulations.export.export_and_run</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.simulations.export.simulation_export.html">kqcircuits.simulations.export.simulation_export</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.simulations.export.util.html">kqcircuits.simulations.export.util</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.simulations.export.html#module-kqcircuits.simulations.export">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.simulations.airbridges_sim.html">kqcircuits.simulations.airbridges_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.simulations.circular_capacitor_sim.html">kqcircuits.simulations.circular_capacitor_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.simulations.cross_section_simulation.html">kqcircuits.simulations.cross_section_simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.simulations.double_pads_sim.html">kqcircuits.simulations.double_pads_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.simulations.empty_simulation.html">kqcircuits.simulations.empty_simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.simulations.finger_capacitor_sim.html">kqcircuits.simulations.finger_capacitor_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.simulations.flip_chip_connector_sim.html">kqcircuits.simulations.flip_chip_connector_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.simulations.port.html">kqcircuits.simulations.port</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.simulations.simulation.html">kqcircuits.simulations.simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.simulations.single_xmon.html">kqcircuits.simulations.single_xmon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.simulations.single_xmons_full_chip_sim.html">kqcircuits.simulations.single_xmons_full_chip_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.simulations.waveguides_sim.html">kqcircuits.simulations.waveguides_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.simulations.xmons_direct_coupling_full_chip_sim.html">kqcircuits.simulations.xmons_direct_coupling_full_chip_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.simulations.xmons_direct_coupling_sim.html">kqcircuits.simulations.xmons_direct_coupling_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.simulations.html#module-kqcircuits.simulations">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/kqcircuits.test_structures.html">kqcircuits.test_structures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.test_structures.junction_test_pads.html">kqcircuits.test_structures.junction_test_pads</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.test_structures.junction_test_pads.junction_test_pads.html">kqcircuits.test_structures.junction_test_pads.junction_test_pads</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.test_structures.junction_test_pads.junction_test_pads_simple.html">kqcircuits.test_structures.junction_test_pads.junction_test_pads_simple</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/kqcircuits.test_structures.junction_test_pads.html#module-kqcircuits.test_structures.junction_test_pads">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.test_structures.airbridge_dc.html">kqcircuits.test_structures.airbridge_dc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.test_structures.cross_test.html">kqcircuits.test_structures.cross_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.test_structures.stripes_test.html">kqcircuits.test_structures.stripes_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.test_structures.test_structure.html">kqcircuits.test_structures.test_structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.test_structures.tsv_test_pattern.html">kqcircuits.test_structures.tsv_test_pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.test_structures.html#module-kqcircuits.test_structures">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/kqcircuits.util.html">kqcircuits.util</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.area.html">kqcircuits.util.area</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.count_instances.html">kqcircuits.util.count_instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.coupler_lib.html">kqcircuits.util.coupler_lib</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.deep_delete.html">kqcircuits.util.deep_delete</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.dependencies.html">kqcircuits.util.dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.edit_node_plugin.html">kqcircuits.util.edit_node_plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.export_helper.html">kqcircuits.util.export_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.geometry_helper.html">kqcircuits.util.geometry_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.geometry_json_encoder.html">kqcircuits.util.geometry_json_encoder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.groundgrid.html">kqcircuits.util.groundgrid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.gui_helper.html">kqcircuits.util.gui_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.import_helper.html">kqcircuits.util.import_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.label.html">kqcircuits.util.label</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.layout_to_code.html">kqcircuits.util.layout_to_code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.library_helper.html">kqcircuits.util.library_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.log_router.html">kqcircuits.util.log_router</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.merge.html">kqcircuits.util.merge</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.netlist_extraction.html">kqcircuits.util.netlist_extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.netlist_graph.html">kqcircuits.util.netlist_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.parameter_helper.html">kqcircuits.util.parameter_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.parameters.html">kqcircuits.util.parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.plugin_startup.html">kqcircuits.util.plugin_startup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.refpoints.html">kqcircuits.util.refpoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.replace_squids.html">kqcircuits.util.replace_squids</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.symmetric_polygons.html">kqcircuits.util.symmetric_polygons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/kqcircuits.util.html#module-kqcircuits.util">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/kqcircuits.defaults.html">kqcircuits.defaults</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/kqcircuits.klayout_view.html">kqcircuits.klayout_view</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/kqcircuits.layer_cluster.html">kqcircuits.layer_cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/kqcircuits.pya_resolver.html">kqcircuits.pya_resolver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/kqcircuits.html#module-kqcircuits">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citing.html">Citing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trademarks.html">Trademarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">KQCircuits</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">User Guide</a> &raquo;</li>
        
      <li>Macro development</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/iqm-finland/KQCircuits/blob/main/docs/user_guide/macro_workflow.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="macro-development">
<h1>Macro development<a class="headerlink" href="#macro-development" title="Permalink to this headline">¶</a></h1>
<p>KLayout macros are Python scripts which can be run inside KLayout Editor.
They can be used, for example, to create or modify elements in the layout,
measure properties of cells, or export data from the layout. See also the
KLayout documentation about <a class="reference external" href="https://www.klayout.de/doc-qt5/about/macro_editor.html">macro development</a> and
<a class="reference external" href="https://www.klayout.de/doc-qt5/programming/index.html">programming scripts</a>
, and the <a class="reference external" href="https://www.klayout.de/doc-qt5/code/index.html">KLayout API documentation</a>.</p>
<div class="section" id="running-the-first-example">
<h2>Running the first example<a class="headerlink" href="#running-the-first-example" title="Permalink to this headline">¶</a></h2>
<p>To get started, follow the steps below to run a demo macro. The comments in the macro explain what is going on step by
step.</p>
<ol class="arabic simple">
<li><p>Open the KLayout application</p></li>
<li><p>From the top menu, choose “Macros” and “Macro Development”, or press F5.</p></li>
<li><p>Select “Python”</p></li>
<li><p>Open “[Local - python branch]”, where you should see the “kqcircuits scripts”
directory</p></li>
<li><p>Open <a class="reference external" href="https://github.com/iqm-finland/KQCircuits/blob/main/klayout_package/python/scripts/macros/generate/demo_placing_a_pcell.lym">kqcircuits_scripts/macros/generate/demo_placing_a_pcell.lym</a></p></li>
<li><p>Click on the green play symbol with the exclamation mark (“Run script
from the current tab”), or use Shift+F5.</p></li>
<li><p>A chip cell should appear in the main KLayout window.</p></li>
</ol>
</div>
<div class="section" id="interacting-with-the-klayout-application">
<h2>Interacting with the KLayout application<a class="headerlink" href="#interacting-with-the-klayout-application" title="Permalink to this headline">¶</a></h2>
<p>KLayout organizes layouts in <em>Panels</em>, which show as tabs in the application if more than one panel is open.
In code, the panel is represented by a <code class="docutils literal notranslate"><span class="pre">LayoutView</span></code> object. Inside each panel there can be one or more
layouts loaded, for example with the <em>File</em>, <em>Open in Same Panel</em> command. Each layout is represented by a
<code class="docutils literal notranslate"><span class="pre">CellView</span></code> object and a <code class="docutils literal notranslate"><span class="pre">Layout</span></code> object. The <code class="docutils literal notranslate"><span class="pre">Layout</span></code> contains all the actual cells, layers and shapes.</p>
<p>As shown by the above, to work with the KLayout display in macro code we need access to at least three objects.
To help in managing this, KQCircuits provides the class <a class="reference internal" href="../api/kqcircuits.klayout_view.html#kqcircuits.klayout_view.KLayoutView" title="kqcircuits.klayout_view.KLayoutView"><code class="xref py py-class docutils literal notranslate"><span class="pre">KLayoutView</span></code></a>.</p>
<div class="section" id="creating-a-new-panel">
<h3>Creating a new panel<a class="headerlink" href="#creating-a-new-panel" title="Permalink to this headline">¶</a></h3>
<p>Often, in a macro you want to start with a new layout in a new panel, which can be created as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kqcircuits.klayout_view</span> <span class="kn">import</span> <span class="n">KLayoutView</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">KLayoutView</span><span class="p">()</span>
</pre></div>
</div>
<p>This code creates a panel, cell view and layout, and initializes these with the layers used by KQCircuits.</p>
</div>
<div class="section" id="accessing-the-currently-active-panel">
<h3>Accessing the currently active panel<a class="headerlink" href="#accessing-the-currently-active-panel" title="Permalink to this headline">¶</a></h3>
<p>In some macros you may want to interact with the layout that is currently visible. In this case, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kqcircuits.klayout_view</span> <span class="kn">import</span> <span class="n">KLayoutView</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">KLayoutView</span><span class="p">(</span><span class="n">current</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="using-klayoutview">
<h3>Using <code class="docutils literal notranslate"><span class="pre">KLayoutView</span></code><a class="headerlink" href="#using-klayoutview" title="Permalink to this headline">¶</a></h3>
<p>Once created, <a class="reference internal" href="../api/kqcircuits.klayout_view.html#kqcircuits.klayout_view.KLayoutView" title="kqcircuits.klayout_view.KLayoutView"><code class="xref py py-class docutils literal notranslate"><span class="pre">KLayoutView</span></code></a> exposes methods for the most common tasks to do with a layout:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">insert_cell</span></code> places KQCircuits elements into the top cell, similar to <code class="docutils literal notranslate"><span class="pre">Element.insert_cell</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">focus</span></code> makes sure a particular cell or the entire layout is visible (zoom to fit and show all hierarchy levels).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">show</span></code> shows the panel associated with this object, in case there are multiple panels open</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">export_pcell_png</span></code> exports an image of a cell to a file</p></li>
</ul>
<p>See the <a class="reference internal" href="../api/kqcircuits.klayout_view.html#kqcircuits.klayout_view.KLayoutView" title="kqcircuits.klayout_view.KLayoutView"><code class="xref py py-class docutils literal notranslate"><span class="pre">KLayoutView</span></code></a> API documentation for all methods and their usage.</p>
<p>If more advanced interaction with KLayout is needed, the KLayout API objects are exposed as properties. See the
corresponding KLayout API documentation linked below for their usage details:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">layout_view</span></code>: The <a class="reference external" href="https://www.klayout.de/doc-qt5/code/class_LayoutView.html">LayoutView</a> instance, which refers
to a panel in the KLayout GUI.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cell_view</span></code>: The <a class="reference external" href="https://www.klayout.de/doc-qt5/code/class_CellView.html">CellView</a> instance. In case a
panel has multiple cell views (for example when multiple files are opened in the same panel), this returns the
currently active one.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">layout</span></code>: The <a class="reference external" href="https://www.klayout.de/doc-qt5/code/class_Layout.html">Layout</a> object is the main container for
cells, layers and geometry</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">top_cell</span></code>: A reference to the first top <a class="reference external" href="https://www.klayout.de/doc-qt5/code/class_Cell.html">Cell</a> of the layout. This is the very first cell shown in the cell window.
Usually we place elements in this cell.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">active_cell</span></code>: A reference to the currently active cell. This is the cell which is shown in bold in the cell
window, and can be changed in KLayout by right-clicking a cell and choosing <em>Show As New Top</em>.</p></li>
</ul>
</div>
</div>
<div class="section" id="debugger">
<h2>Debugger<a class="headerlink" href="#debugger" title="Permalink to this headline">¶</a></h2>
<p>KLayout macros can be debugged using the debugger in the macro IDE. The
debugger can be toggled on/off using the “bug icon” at the top.</p>
<ul>
<li><p>Basic debugger workflow</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Place breakpoint in the code (red circle icon or F9).</p></li>
<li><p>Run the macro.</p></li>
<li><p>Execution will stop at the breakpoint. The values of all variables at
that point are now visible in the “Local variables” panel. You can also
double-click on the lines in the “Call stack” panel, to see variable
values at other stages of the call stack.</p></li>
<li><p>Can place more breakpoints, and the macro will stop at the next one
when you run the macro again.</p></li>
<li><p>Can also use the “Step over” and “Step into” buttons (icons with
arrows inside files or F) to go through the code step-by-step.</p></li>
</ol>
</div></blockquote>
</li>
<li><p>If an exception is raised when running a macro, you will get a pop-up
error window. By pressing “Cancel”, you will get the debugger view at the
point where the exception was raised, as if there was a breakpoint there.</p></li>
<li><p>PCells can sometimes have errors in their code, which will be visible in
the layout as missing parts and an asterisk at the end of the cell name.
These errors can be caught by having the macro window open and debugger on
when the PCell is placed into the layout.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>For this to work the PCell must be created from instance menu on
the top. If the PCell is dragged from “Libraries” panel, KLayout will
become unresponsive after the error is caught.</p></li>
<li><p>Errors will not be caught if creating a new PCell with the exact same
parameters as a previous one, because the PCell code runs only the first
time it is created.</p></li>
</ul>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The debugger will slow down code execution, so it can make sense
to disable it when running heavy macros.</p>
</div>
</div>
<div class="section" id="reloading-libraries">
<h2>Reloading libraries<a class="headerlink" href="#reloading-libraries" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Even though you have changed some line inside a PCell file, if
nothing changes on the generated design inside the editor, you have to re-run
the <a class="reference external" href="https://github.com/iqm-finland/KQCircuits/blob/main/klayout_package/python/scripts/macros/reload.lym">reload.lym</a> file to be able to reload the library features for
changes to be updated. The reload macro can also be run from
“KQCircuits -&gt; Reload libraries” in the main KLayout window</p></li>
<li><p>The libraries are automatically reloaded whenever you restart KLayout, so
in that case there is no need to run the <a class="reference external" href="https://github.com/iqm-finland/KQCircuits/blob/main/klayout_package/python/scripts/macros/reload.lym">reload</a> macro to see changes.</p></li>
</ul>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Locate the <a class="reference external" href="https://github.com/iqm-finland/KQCircuits/blob/main/klayout_package/python/scripts/macros/generate/demo_placing_a_pcell.lym">demo_placing_a_pcell</a>
and <a class="reference external" href="https://github.com/iqm-finland/KQCircuits/blob/main/klayout_package/python/scripts/macros/generate/demo_pya_basics.lym">demo_pya_basic</a> tutorials under
<a class="reference external" href="https://github.com/iqm-finland/KQCircuits/blob/main/klayout_package/python/scripts/macros/generate">klayout_package/python/scripts/macros/generate</a> directory. Use the tutorials to have basic understanding
about KLayout Editor and macro generation concept.</p></li>
<li><p>Some other macros, such as <a class="reference external" href="https://github.com/iqm-finland/KQCircuits/blob/main/klayout_package/python/scripts/macros/generate/test_waveguide_composite.lym">test_waveguide_composite</a> and
<a class="reference external" href="https://github.com/iqm-finland/KQCircuits/blob/main/klayout_package/python/scripts/macros/generate/test_wgc_airbridge.lym">test_wgc_airbridge</a>, can be useful to learn more about specific KQC
elements.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="mask_export.html" class="btn btn-neutral float-right" title="Mask export" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="python_workflow.html" class="btn btn-neutral float-left" title="Python workflow tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021-2023, IQM.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>